@{
    ViewData["Title"] = "Escanear Código QR";
}

<h2>Escanear Código QR</h2>

<div id="reader" style="width: 300px;"></div>

<script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>

<script>
    function onScanSuccess(decodedText, decodedResult) {
        console.log(`Código detectado: ${decodedText}`);
        window.location.href = decodedText;
    }

    function onScanFailure(error) {
        console.warn(`Error scanning: ${error}`);
    }

    let config = {
        fps: 10,
        qrbox: { width: 250, height: 250 },
        aspectRatio: 1.0,
        rememberLastUsedCamera: true
    };

    let html5QrcodeScanner = new Html5QrcodeScanner(
        "reader",
        config,
        false
    );

    html5QrcodeScanner.render(onScanSuccess, onScanFailure);
</script>